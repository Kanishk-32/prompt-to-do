try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1969c6f1-e353-489d-a089-93ac0e87aaf9",e._sentryDebugIdIdentifier="sentry-dbid-1969c6f1-e353-489d-a089-93ac0e87aaf9")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{18472:(e,t,r)=>{r.d(t,{O:()=>l});var n=r(54568),s=r(32987);let l=e=>{let{size:t=20,borderRadius:r=.27*t,className:l,children:a}=e;return(0,n.jsx)("div",{style:{width:t,height:t,borderRadius:r},className:(0,s.A)("shrink-0 bg-bg-000 border-border-300 border-0.5 shadow-sm flex items-center justify-center",l),children:a})}},20878:(e,t,r)=>{r.d(t,{W:()=>a});var n=r(68096),s=r(1761),l=r(7620);function a(){let{mutate:e,isPending:t}=(0,n.Jy)(),{account:r}=(0,s.YL)();return{dismiss:(0,l.useCallback)(t=>{var n,s,l;r&&(null!=r&&null!=(s=r.settings)&&null!=(n=s.dismissed_claudeai_banners)&&n.some(e=>e.banner_id===t)||e({...r.settings,dismissed_claudeai_banners:[...(null==r||null==(l=r.settings)?void 0:l.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]}))},[r,e]),isDismissed:(0,l.useCallback)(e=>{var t,n;return(null==r||null==(n=r.settings)||null==(t=n.dismissed_claudeai_banners)?void 0:t.some(t=>t.banner_id===e))||!1},[r]),isPending:t}}},22364:(e,t,r)=>{r.d(t,{P:()=>m});var n=r(54568),s=r(1761),l=r(15046),a=r(41417),i=r(56370),o=r(12072),u=r(27062),c=r(60265),d=r(99272),f=r(32987),g=r(62971),p=r(92947),v=r(45078);function m(e){var t,r;let{tool:m,server:_,children:b}=e,{account:y}=(0,s.YL)(),h=null!=(r=null==y||null==(t=y.settings)?void 0:t.enabled_mcp_tools)?r:{},x=(0,v.v)("enabled_mcp_tools")||{},{value:w}=(0,u.fS)("claude_ai_sticky_project_settings");w&&(h=x);let{toggleMcpToolEnabled:j,toggleMcpToolAlwaysApproved:k}=(0,p.es)(),{getApprovalSetting:A}=(0,p.BN)(),C=A(_.name,m),E="never"===C,M="always"===C,S=m.enabledKey,N=(e,t,r)=>(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[t,(0,n.jsx)("p",{className:"text-sm text-text-400",children:r})]}),(0,n.jsx)(c.J,{size:16,className:(0,f.A)("shrink-0",e?"opacity-1":"opacity-0")})]}),T=(0,n.jsx)(a.$,{variant:"outline",disabled:!1===h[S]||M,append:(0,n.jsx)(d.a,{size:16}),className:"!min-w-[200px] flex justify-between items-center",children:"never"===C?(0,n.jsx)(g.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}):(0,n.jsx)(g.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"})});return(0,n.jsxs)("div",{className:"flex flex-row gap-4 flex-shrink-0",children:[(0,n.jsx)("label",{children:(0,n.jsx)(l.j,{checked:!1!==h[S],onChange:e=>j(S,e.target.checked,_.url)})}),(0,n.jsx)("div",{className:"flex flex-grow",children:b}),(0,n.jsxs)(i.ms,{unstyledTrigger:!0,align:"start",trigger:M?(0,n.jsx)(o.Tooltip,{side:"top",tooltipContent:(0,n.jsx)(g.A,{defaultMessage:"Setting manged by your organization",id:"+y38sDfyun"}),children:(0,n.jsx)("div",{children:T})}):T,children:[(0,n.jsx)(i.tJ,{onClick:()=>{k(m.alwaysApprovedKey,!1)},children:N(!E,(0,n.jsx)(g.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"}),(0,n.jsx)(g.A,{defaultMessage:"Your approval is required every time",id:"Ne5BQmk7c1"}))}),(0,n.jsx)(i.tJ,{onClick:()=>{k(m.alwaysApprovedKey,!0)},children:N(E,(0,n.jsx)(g.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}),(0,n.jsx)(g.A,{defaultMessage:"Your approval is not required",id:"9AbpSd6OJA"}))})]})]})}},63246:(e,t,r)=>{r.d(t,{Ah:()=>a,Bs:()=>s,NJ:()=>l,VH:()=>n,Xs:()=>o,u5:()=>i});let n=e=>{let{account:t,isClaudeDot:r}=e;return r?!1===t.settings.has_finished_claudeai_onboarding:!t.full_name||!t.display_name},s=(e,t)=>t&&!e.is_verified,l=(e,t)=>!!function(e,t){for(let r of e.invites)if(r.organization.capabilities&&r.organization.capabilities.includes(t))return r}(e,t?"raven":"api"),a=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,i=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r&&t&&!e.age_is_verified},o=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n({account:e,isClaudeDot:t})||s(e,t)||l(e,t)||a(e,t)||i(e,t,r)}},69916:(e,t,r)=>{r.d(t,{ErrorSegmentConnector:()=>S,ErrorStatsigConnector:()=>N,ErrorsProvider:()=>A,i:()=>T,Y:()=>C});var n=r(54568),s=r(63246),l=r(29585),a=r(27062),i=r(44180),o=r(90819),u=r.n(o),c=r(58648),d=r.n(c),f=r(26836),g=r.n(f),p=r(62942),v=r(7620),m=r(75006),_=r(98518),b=r(1761);function y(e,t){let r=[];for(let n of e){if(null==n)continue;let e=h(n,t+1);""!==e&&r.push(e)}return r.length>0?r.join(" "):""}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>5?"":e instanceof Error?e.message:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?String(e):v.isValidElement(e)?function e(t,r){var n;let s=t.props;return"object"==typeof s&&null!==s&&"defaultMessage"in s&&"string"==typeof s.defaultMessage?s.defaultMessage:"object"==typeof s&&null!==s&&"children"in s?(n=s.children,"string"==typeof n||"number"==typeof n||"boolean"==typeof n?String(n):null==n?"":Array.isArray(n)?y(n,r+1):v.isValidElement(n)?e(n,r+1):h(n,r+1)):""}(e,t):Array.isArray(e)?y(e,t):""}var x=r(46127);let w=(0,v.createContext)(void 0),j=e=>{var t;if(e instanceof l.LG&&(null==(t=e.extra)?void 0:t.details)&&"object"==typeof e.extra.details&&"error_visibility"in e.extra.details)return String(e.extra.details.error_visibility)};function k(e){var t;let{userFacingMessage:r,error:n,toastId:s,errorContext:a,track:o,isApiError:u}=e,c=h(r),d=c?"".concat(c.substring(0,200)).concat(c.length>200?"...":""):"User-facing error toast",f=c?"User-facing error toast: ".concat(d):"User-facing error toast";o({event_key:"claudeai.user_facing_error.shown",error_message:d,toast_id:s,error_type:n instanceof l.LG?n.type:n instanceof Error?n.name:typeof n,error_source:(null==a||null==(t=a.tags)?void 0:t.source)||"unknown",has_original_error:!!n,original_error_message:n instanceof Error?n.message.substring(0,200):void 0,error_stack_trace:(e=>{if(e instanceof Error&&e.stack)return e.stack.split("\n").slice(0,3).join("\n").substring(0,500)})(n),error_code:(e=>{if(e instanceof l.LG){var t;if(e.errorCode)return e.errorCode;if((null==(t=e.extra)?void 0:t.details)&&"object"==typeof e.extra.details&&"error_code"in e.extra.details&&"string"==typeof e.extra.details.error_code)return e.extra.details.error_code}if(e instanceof Error&&"code"in e)return String(e.code)})(n),error_status_code:(e=>{if(e instanceof Error){if("statusCode"in e&&"number"==typeof e.statusCode)return e.statusCode;if("status"in e&&"number"==typeof e.status)return e.status}})(n),error_visibility:j(n),websocket_close_code:(e=>{var t;if(e instanceof l.LG&&(null==(t=e.extra)?void 0:t.details)&&"object"==typeof e.extra.details&&"websocket_close_code"in e.extra.details&&"number"==typeof e.extra.details.websocket_close_code)return e.extra.details.websocket_close_code})(n),is_instanceof_api_error:n instanceof l.LG,is_caller_api_error:u,offline_status:"undefined"!=typeof navigator?!navigator.onLine:void 0});let g=(null==a?void 0:a.tags)||{},p=(null==a?void 0:a.extra)||{};if(n instanceof Error){let e=Error(f);e.stack=n.stack,(0,i.Cp)(e,{tags:{source:"error-toast",...g},extra:{toastId:s,originalErrorMessage:n.message,originalError:n,...p}})}else n?(0,i.Cp)(Error(f),{tags:{source:"error-toast",errorType:typeof n,...g},extra:{toastId:s,originalError:n,...p}}):(0,i.Cp)(Error(f),{tags:{source:"error-toast",errorType:"string"==typeof r?"string":"react-element",...g},extra:{toastId:s,extractedText:f,...p}})}function A(e){let{children:t}=e,r=(0,v.useRef)(1),[s,l]=(0,v.useState)([]),a=(0,v.useRef)(null),i=(0,v.useRef)(null),o=(0,v.useRef)([]),u=(0,v.useCallback)(e=>{i.current=e,o.current.forEach(t=>{e(t,void 0)}),o.current=[]},[]),c=(0,v.useCallback)(e=>{a.current=e},[]),d=(0,v.useCallback)(async e=>{if(null!==i.current)return i.current(e);o.current.push(e)},[]),f=(0,v.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),g=(0,v.useCallback)((e,t)=>{let n=r.current++,{timeout:s,error:a,errorContext:i}=t||{};return k({userFacingMessage:e,error:a,toastId:n,errorContext:i,track:d,isApiError:!1}),l(t=>[...t,{id:n,message:e,toastType:"error"}]),s&&setTimeout(()=>f(n),s),n},[f,d]),p=(0,v.useCallback)((e,t)=>{let n=r.current++,{timeout:s,errorContext:i}=t||{},o=e instanceof Error?e.message:String(e);return k({userFacingMessage:o,error:e,toastId:n,errorContext:i,track:d,isApiError:!0}),a.current&&"user_facing"!==j(e)||l(e=>[...e,{id:n,message:o,toastType:"error"}]),s&&setTimeout(()=>f(n),s),n},[f,d]),m=(0,v.useCallback)((e,t)=>{let n=r.current++;return l(t=>[...t,{id:n,message:e,toastType:"success"}]),t&&setTimeout(()=>f(n),t),n},[f]),_=(0,v.useMemo)(()=>({toasts:s,addError:g,addApiError:p,addSuccess:m,clearToast:f,registerSegmentTracker:u,registerErrorVisibility:c}),[s,g,p,m,f,u,c]);return(0,n.jsx)(w.Provider,{value:_,children:t})}function C(){let e=(0,v.useContext)(w);if(!e)throw Error("Must be called within ErrorsProvider");return e}let E=m.z.object({id:m.z.string().optional().nullable(),title:m.z.string().optional().nullable(),message:m.z.string().optional().nullable(),displayFrequencyHours:m.z.number().optional().nullable()}),M={};function S(){let{registerSegmentTracker:e}=C(),{track:t}=(0,_.st)();return(0,v.useEffect)(()=>{e(t)},[e,t]),null}function N(){let{registerErrorVisibility:e}=C(),{value:t}=(0,a.fS)("claude_ai_error_visibility");return(0,v.useEffect)(()=>{e(t)},[e,t]),null}function T(){var e;let{id:t,title:r,message:n,displayFrequencyHours:l}=(0,a.iW)("claude_system_message",M,E),{account:i}=(0,b.YL)(),o=null!=(e=null==i?void 0:i.uuid)?e:"logged-out",c=(0,p.usePathname)(),[f,m]=(0,x.Vc)("dismissed-system-messages",{}),_=(0,v.useMemo)(()=>()=>m(e=>{let r=u()(e);return t&&g()(r,[o,t],Date.now()),r}),[m,o,t]);return(0,v.useMemo)(()=>{if(!i||(0,s.Xs)(i,!0)||"/download"===c||!t)return!1;let e=d()(f,[o,t]);return!e||"boolean"==typeof e||!!l&&Date.now()-e>=60*l*6e4},[i,t,o,f,l,c])?{currentSystemMessageId:t,currentSystemMessageTitle:r,currentSystemMessageContent:n,dismissCurrentSystemMessage:_}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},73347:(e,t,r)=>{r.d(t,{M:()=>u});var n=r(54568),s=r(41417),l=r(68711),a=r(32987),i=r(7620),o=r(62971);function u(e){let{text:t,className:r}=e,[u,c]=(0,i.useState)(!1),d=(0,i.useRef)(null),f=(0,i.useRef)(0),[g,p]=(0,i.useState)(42),v=g>42;return((0,i.useLayoutEffect)(()=>{var e;p((null==(e=d.current)?void 0:e.scrollHeight)||0)},[t]),t)?(0,n.jsxs)("div",{className:(0,a.A)("overflow-hidden relative transition-[height] duration-150 ease-in-out","text-text-300 text-sm",r),style:{height:u?g+32*!!v:40},children:[(0,n.jsx)("div",{ref:d,className:"whitespace-pre-wrap",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:t}),v&&(0,n.jsx)("div",{className:"absolute bottom-0 right-0 bg-bg-100 bottom-0",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute top-0 bottom-0 -left-4 w-6 bg-gradient-to-r from-transparent to-bg-100"}),(0,n.jsx)(s.$,{size:"inline",variant:"ghost",onClick:()=>{var e;let t=null==(e=d.current)?void 0:e.closest(".overflow-y-auto");!u&&t?f.current=t.scrollTop:u&&t&&t.scrollTo({top:f.current,behavior:"instant"}),c(e=>!e)},className:"font-medium flex gap-1 items-center",children:u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{size:12,weight:"bold"}),(0,n.jsx)(o.A,{defaultMessage:"Less",id:"mFYgAXM/x4"})]}):(0,n.jsx)(o.A,{defaultMessage:"{ellipsis}More",id:"eRW5dl5m34",values:{ellipsis:"..."}})})]})})]}):null}},92947:(e,t,r)=>{r.d(t,{$V:()=>k,vx:()=>w,kX:()=>j,QD:()=>E,HJ:()=>x,sb:()=>h,BN:()=>C,M8:()=>S,ko:()=>A,AY:()=>M,es:()=>N}),r(98878);var n=r(68096),s=r(7726),l=r(98518),a=r(1761),i=r(65631),o=r(27062),u=r(90119),c=r(62942),d=r(7620),f=r(81527),g=r(20878),p=r(19864),v=r(93770),m=r(21036),_=r(75973),b=r(62370);r(45078);var y=r(91768);let h=()=>{let{value:e}=(0,o.fS)("bagel_enabled");return e},x=()=>{let{value:e}=(0,o.fS)("inline_tool_approval");return e},w=()=>{let{account:e,activeOrganization:t}=(0,a.YL)(),r=(0,a.mV)(),n=(0,i.pG)(e,t,"claude-ai"),s=(0,i.yI)(e,t,i.Nt.IntegrationsManage);return!r||n||s},j=()=>{let e=(0,a.zm)(),t=w();return e&&!t},k="mcp_directory_chin",A=function(){var e,t;let{shouldTrack:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,d.useRef)(!1),s=h(),{dismiss:l}=(0,g.W)(),{account:i}=(0,a.YL)(),o=j(),u=new Date,c="".concat(u.getDate(),"-").concat(u.getMonth(),"-").concat(u.getFullYear()),f="".concat(k,"_").concat(c),p=(null!=(t=null==i||null==(e=i.settings.dismissed_claudeai_banners)?void 0:e.map(e=>e.banner_id))?t:[]).filter(e=>e.includes(k)),v=(0,d.useMemo)(()=>!(!s||o||p.includes(k))&&(!(p.length>3)||!p.includes(f)),[o,s,p,f]);return(0,d.useEffect)(()=>{!n.current&&v&&!p.includes(f)&&r&&(l(f),n.current=!0)},[f,p,r,l,v]),v},C=()=>{var e;let{getMcpToolApprovalRequestSetting:t}=function(){let{value:e}=(0,m.useDynamicConfig)("mcp_tool_approval_config"),t=(0,d.useCallback)((t,r)=>{var n,s,l,a;if(e){if((null==(n=e[t])?void 0:n[r])!==void 0)return e[t][r];if((null==(s=e[t])?void 0:s["*"])!==void 0)return e[t]["*"];if((null==(l=e["*"])?void 0:l[r])!==void 0)return e["*"][r];if((null==(a=e["*"])?void 0:a["*"])!==void 0)return e["*"]["*"]}},[e]);return{toolApprovalConfig:e,getMcpToolApprovalRequestSetting:t}}(),{account:r}=(0,a.YL)(),n=null==r||null==(e=r.settings)?void 0:e.enabled_mcp_tools,s=(0,d.useRef)(n);return(0,d.useEffect)(()=>{s.current=n},[n]),{getApprovalSetting:(0,d.useCallback)((e,r)=>{var n,l;let a=t(null!=e?e:"",null!=(n=null==r?void 0:r.name)?n:""),i=r?(null!=(l=s.current)?l:{})[r.alwaysApprovedKey]:void 0;return"perChat"===a||"always"===a?"always":i?"never":!1===i?"ask":null!=a?a:"ask"},[t])}},E=function(){let{pathname:e,queryString:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:r}=(0,a.YL)(),n=(0,c.usePathname)(),s=(0,c.useSearchParams)(),i=(0,u.V)(),{track:d}=(0,l.st)();(0,o.fS)("claudeai_beam").value;let f="".concat("").concat((0,y.dH)({pathname:e||n,searchParams:s,queryString:t,isClaudeApp:i}));return e=>{let{uuid:t,url:n}=e;d({event_key:"claudeai.mcp.auth.init",uuid:t,url:n}),window.location.href="/api/organizations/".concat(null==r?void 0:r.uuid,"/mcp/start-auth/").concat(t,"?redirect_url=").concat(encodeURIComponent(f),"&open_in_browser=1")}},M=()=>{let e=(0,b.Uz)({type:"local"});return!!(0,u.V)()&&e.length>0},S=()=>{var e,t,r;let n=(0,p.o)(),s=(null==(e=n.pendingConversationSettings)?void 0:e.compass_mode)==="advanced"||(null==(r=n.conversation)||null==(t=r.conversationSettings)?void 0:t.compass_mode)==="advanced",l=(0,b.Uz)({type:"remote"}).length>0;return s&&l},N=()=>{let e=(0,v.jw)(),{account:t}=(0,a.YL)(),{isInBeam:r,beamConversationSettings:i,setBeamConversationSettings:u}=(0,_.d)(),c=(0,v.QN)(),{data:d}=(0,f.xQ)(c),{mutate:g}=(0,f.mu)(c),{value:p}=(0,o.fS)("claude_ai_sticky_project_settings"),{track:m}=(0,l.st)(),{mutate:b}=(0,n.Jy)(),{mutate:y}=(0,s.HF)(null==e?void 0:e.id);return{toggleMcpToolEnabled:(n,s,l)=>{if(!t)return;let a=Array.isArray(n)?n.reduce((e,t)=>({...e,[t]:s}),{}):{[n]:s};if(e){var o;y({settings:{enabled_mcp_tools:{...null==(o=e.conversationSettings)?void 0:o.enabled_mcp_tools,...a}}})}else r&&u&&u({...i,enabled_mcp_tools:{...(null==i?void 0:i.enabled_mcp_tools)||{},...a}});if(c&&p){if(!d)return;g({...d,enabled_mcp_tools:{...(null==d?void 0:d.enabled_mcp_tools)||{},...a}})}else{let e=t.settings.enabled_mcp_tools;b({...t.settings,enabled_mcp_tools:{...e,...a}})}m({event_key:"claudeai.mcp.tool.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:n,value:s,url:l})},toggleMcpToolAlwaysApproved:(e,r)=>{if(!t)return;let n=t.settings.enabled_mcp_tools;b({...t.settings,enabled_mcp_tools:{...n,[e]:r}})}}}}}]);