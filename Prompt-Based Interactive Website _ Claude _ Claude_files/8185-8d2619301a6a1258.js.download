try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a1528964-c159-4ba9-920d-b33487f1591b",e._sentryDebugIdIdentifier="sentry-dbid-a1528964-c159-4ba9-920d-b33487f1591b")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1417,7949,8185],{1385:(e,t,n)=>{n.d(t,{c:()=>u,j:()=>m});var a=n(42977),r=n(54568),s=n(90510),i=n(32987),o=n(7620),l=n(62971);function c(){let e=(0,a._)(["\n  relative\n  bg-text-500/50\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return c=function(){return e},e}function d(){let e=(0,a._)(["\n  relative\n  bg-bg-400\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-bg-000/0 after:from-0% after:via-bg-000/20 after:via-50% after:to-100% after:to-bg-000/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return d=function(){return e},e}let u=e=>{let{repeat:t,children:n}=e;return(0,r.jsx)(r.Fragment,{children:Array.from({length:t}).map((e,t)=>(0,r.jsx)(o.Fragment,{children:n},t))})};function m(e){let{className:t,height:n=24,width:a,rounded:s="full",variant:c="default"}=e,d=(0,o.useRef)(null),u={height:n,width:"number"==typeof a||"string"==typeof a?a:"object"==typeof a?(null===d.current&&(d.current=Math.round(Math.random()*(a.max-a.min))+a.min),d.current):"100%",maxWidth:"100%"};return(0,r.jsx)("light"===c?p:f,{className:(0,i.A)(t,{"rounded-full":"full"===s,"rounded-xl":"xl"===s,"rounded-lg":"lg"===s,"rounded-md":"md"===s,"rounded-sm":"sm"===s}),style:u,children:(0,r.jsx)("span",{className:"sr-only",children:(0,r.jsx)(l.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}let f=s.J.div(c()),p=s.J.div(d())},12072:(e,t,n)=>{n.d(t,{Tooltip:()=>h});var a=n(42977),r=n(54568),s=n(90510),i=n(91961),o=n(7620),l=n(32987),c=n(37463),d=n(67754);function u(){let e=(0,a._)(["\n  px-2\n  py-1\n  text-xs\n  font-normal\n  font-ui\n  leading-tight\n  rounded-md\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return u=function(){return e},e}function m(){let e=(0,a._)(["\n  max-w-[337px]\n  z-tooltip\n  [*:disabled_&]:hidden\n"]);return m=function(){return e},e}function f(){let e=(0,a._)(["\n  p-1\n  font-small-bold\n  rounded-lg\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return f=function(){return e},e}function p(){let e=(0,a._)(["\n  p-1\n  font-base\n  border-border-300\n  border-0.5\n  rounded-lg\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  text-text-100\n  bg-bg-100\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return p=function(){return e},e}function h(e){let{children:t,tooltipContent:n,contentStyle:a="default",side:s="top",sideOffset:c,align:u,className:m,delayDuration:f=200,keyboardShortcut:p,...h}=e,g=x[a],v=function(e){let t=(0,i.vm)();return(0,o.useMemo)(()=>{if(!e)return"";let n=e.toLowerCase().split("+").map(e=>e.trim()),a=[],r=[];n.forEach(e=>{["cmd","command","meta","ctrl","control","alt","option","shift"].includes(e)?a.push(e):r.push(e)});let s=["ctrl","control","alt","option","shift","cmd","command","meta"],i=[...a.sort((e,t)=>s.indexOf(e)-s.indexOf(t)).map(e=>t?({ctrl:"⌃",control:"⌃",alt:"⌥",option:"⌥",shift:"⇧",cmd:"⌘",command:"⌘",meta:"⌘"})[e]:({ctrl:"Ctrl",control:"Ctrl",alt:"Alt",option:"Alt",shift:"⇧",cmd:"Ctrl",command:"Ctrl",meta:"Ctrl"})[e]),...r.map(e=>{if(t){if("space"===e)return"␣";if("enter"===e||"return"===e)return"⏎";if("delete"===e||"backspace"===e)return"⌫";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"⇥";if("up"===e)return"↑";if("down"===e)return"↓";if("left"===e)return"←";if("right"===e)return"→"}else{if("space"===e)return"Space";if("enter"===e||"return"===e)return"Enter";if("delete"===e||"backspace"===e)return"Backspace";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"Tab";if("up"===e)return"Up";if("down"===e)return"Down";if("left"===e)return"Left";if("right"===e)return"Right"}return e.match(/^f\d+$/)||1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)})];return t?i.join(""):i.join("+")},[e,t])}(p||"");return(0,r.jsx)(d.Kq,{delayDuration:f,children:(0,r.jsxs)(d.bL,{...h,children:[(0,r.jsx)(d.l9,{asChild:!0,children:t}),(0,r.jsx)(d.ZL,{children:(0,r.jsx)("span",{children:(0,r.jsxs)(g,{className:(0,l.A)(m,!n&&"hidden"),sideOffset:null!=c?c:5,side:s,align:u,children:[n,p&&(0,r.jsx)("span",{className:"ml-1.5 opacity-70",children:v})]})})})]})})}let g=(0,s.J)(d.UC)(u()),v=(0,s.J)(d.UC)(m()),x={default:g,citation:e=>{let{children:t,...n}=e;return(0,r.jsx)(v,{...n,children:(0,r.jsx)(c.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"p-1 font-base text-text-200 bg-bg-100 break-words border-0.5 border-border-300/25 max-h-[300px] shadow-diffused shadow-[hsl(var(--always-black)/4%)] rounded-lg overflow-y-auto",children:t})})},inputMenu:(0,s.J)(d.UC)(f()),sampleImage:(0,s.J)(d.UC)(p())}},15989:(e,t,n)=>{n.d(t,{J:()=>h});var a=n(54568),r=n(8027),s=n(11515),i=n(86030),o=n(64359),l=n(37076),c=n(32987),d=n(46760),u=n(62971),m=n(47823),f=n(73347),p=n(22364);function h(e){let{onClose:t,server:n}=e,c=(0,d.A)();return(0,a.jsx)(l.aF,{isOpen:!0,hasCloseButton:!0,onClose:t,modalSize:"xl",children:(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-6",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(s.d,{url:n.url,fallbackSvg:(0,a.jsx)(r.B,{letter:n.name,size:40}),size:40}),(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("p",{className:"font-medium",children:n.name}),(0,a.jsx)(i.E,{children:"remote"===n.type?(0,a.jsx)(u.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"}):(0,a.jsx)(u.A,{defaultMessage:"LOCAL DEV",id:"S14UXqQo+W"})})]}),n.url?(0,a.jsx)(m.sd,{url:n.url}):n.version&&(0,a.jsx)("div",{className:"text-sm text-text-400",children:n.version})]})]})}),(0,a.jsx)(o.r,{gradientHeight:24,className:"h-[500px]",children:(0,a.jsx)("div",{className:"flex flex-col pb-4",children:(()=>{let e=!!n.tools.length,t=!!n.resources.length,r=!!n.prompts.length,s=!e&&t,i=!e&&!t&&r;return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(g,{name:c.formatMessage({defaultMessage:"Tools",id:"nUT0LvZVOx"}),items:n.tools,server:n,isFirst:e}),t&&(0,a.jsx)(g,{name:c.formatMessage({defaultMessage:"Resources",id:"c/KktLImbB"}),items:n.resources,isFirst:s}),r&&(0,a.jsx)(g,{name:c.formatMessage({defaultMessage:"Prompts",id:"p7buKPIFPB"}),items:n.prompts,isFirst:i})]})})()})})]})})}function g(e){let{name:t,items:n,server:r,isFirst:s}=e;return(0,a.jsxs)("div",{className:(0,c.A)("flex flex-col pb-4",!s&&"border-t border-border-300 pt-4"),children:[(0,a.jsx)("div",{className:"sticky top-0 w-full bg-bg-100 pt-2 pb-4 z-10",children:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)("div",{className:"font-large-bold text-text-100",children:t})})}),(0,a.jsx)("div",{children:n.map(e=>{let t=(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"font-base-bold",children:e.displayName}),(0,a.jsx)(f.M,{text:e.description})]});return(0,a.jsx)("div",{className:"py-2",children:r?(0,a.jsx)(p.P,{tool:e,server:r,children:t},e.name):t},e.name)})})]})}},18179:(e,t,n)=>{n.d(t,{Loading:()=>o});var a=n(54568),r=n(32987),s=n(7620),i=n(62971);let o=(0,s.memo)(function(e){let{size:t="md",fullscreen:n=!1,inheritColor:o,delay:l=0}=e,[c,d]=(0,s.useState)(l>0);return(0,s.useEffect)(()=>{if(!l)return;let e=setTimeout(()=>d(!1),l);return()=>clearTimeout(e)},[l]),(0,a.jsx)("div",{className:(0,r.A)(n?"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2":"m-auto"),children:(0,a.jsx)("div",{className:(0,r.A)("sm"===t&&"h-4 w-4 border-2","md"===t&&"h-20 w-20 border-8",o?"border-current":"border-border-200","text-secondary inline-block animate-spin rounded-full border-solid border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",c&&"hidden"),role:"status",children:(0,a.jsx)("span",{className:"sr-only",children:(0,a.jsx)(i.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})})})},18900:(e,t,n)=>{n.d(t,{$D:()=>p,I5:()=>h,QJ:()=>f,VD:()=>v,ct:()=>A,eG:()=>y,gn:()=>g,iB:()=>m,oz:()=>x});var a=n(77186),r=n(1761),s=n(71473),i=n(27062),o=n(75632),l=n(48721),c=n(87606),d=n(7620),u=n(75006);function m(){let{value:e}=(0,i.fS)("bad_moon_rising"),t="0"===new URLSearchParams(window.location.search).get("m");return e&&!t}function f(){return(0,i.fS)("yukon_gold").value}let p=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(n,"/sessions"),{queryKey:[s.Rv,{orgUUID:n}],enabled:!!t&&e,staleTime:3e4,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function h(e,t){return{uuid:(0,o.N)(),session_id:t,type:"user",parent_tool_use_id:null,message:{role:"user",content:e}}}let g=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(n,"/sessions/").concat(e),{queryKey:[s.Ex,{orgUUID:n,sessionId:e}],enabled:!!t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function v(e){let t=(0,i.T9)("bad_moon_rising_config","environment_id","",u.z.string()),n=(0,i.T9)("bad_moon_rising_config","byoc_environment_id","",u.z.string());return"byoc"===e&&n?n:t}function x(){let e=b(),t=(0,i.T9)("bad_moon_rising_config","environment_id","",u.z.string()),n=(0,i.T9)("bad_moon_rising_config","cwd","",u.z.string()),a=(0,i.T9)("bad_moon_rising_prompt","main",void 0,u.z.string().optional());return(0,d.useCallback)(r=>{let{initialMessage:s,title:i,gitRepoUrl:o,gitBranch:l,overrideEnvironmentId:c}=r,d=[];s&&d.push({type:"event",data:s});let u=[],m=[];return o&&l&&(u.push({type:"git_repository",url:o}),m.push({type:"git_repository",git_info:{type:"github",repo:o.split("github.com/")[1],branches:[l]}})),e.mutateAsync({title:i,events:d,environment_id:c||t,session_context:{cwd:n,sources:u,outcomes:m,model:"claude-opus-4-1-20250805",custom_system_prompt:a}})},[e,t,n,a])}let b=()=>{let{activeOrganization:e}=(0,r.YL)(),t=(0,c.useQueryClient)(),n=null==e?void 0:e.uuid;return(0,a.L2)("/v1/sessions/organizations/".concat(n,"/sessions"),"POST",{onSuccess:()=>{t.invalidateQueries({queryKey:[s.Rv,{orgUUID:n}]})},meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function y(){let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/dust/generate_title_and_branch"),"POST")}let j=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="/v1/sessions/ws/organizations/".concat(e,"/sessions/").concat(t,"/subscribe");n.replay&&(a+="?replay=true");let r="https:"===window.location.protocol?"wss:":"ws:";return"".concat(r,"//").concat(window.location.host).concat(a)},w=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(i,"/sessions/").concat(e,"/events"),{queryKey:[s.ri,{orgUUID:i,sessionId:e}],enabled:!!n&&t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};class C{[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((e,t)=>{this.readResolve=e,this.readReject=t})}enqueue(e){if(this.readResolve){let t=this.readResolve;this.readResolve=void 0,this.readReject=void 0,t({done:!1,value:e})}else this.queue.push(e)}done(){if(this.isDone=!0,this.readResolve){let e=this.readResolve;this.readResolve=void 0,this.readReject=void 0,e({done:!0,value:void 0})}}error(e){if(this.hasError=e,this.readReject){let t=this.readReject;this.readResolve=void 0,this.readReject=void 0,t(e)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}constructor(e){this.returned=e,this.queue=[],this.isDone=!1,this.started=!1}}function A(e,t){let{data:n,isLoading:a,refetch:s}=w(e,!1),{inputStream:i,streamedMessages:o}=function(e,t,n){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=(0,d.useRef)(null),o=(0,d.useRef)(null),c=(0,d.useRef)(null),[u,m]=(0,d.useState)([]);(0,d.useEffect)(()=>{m([])},[e]);let f=(0,d.useRef)(null);(0,d.useEffect)(()=>{f.current=t},[t]);let{activeOrganization:p}=(0,r.YL)(),h=null==p?void 0:p.uuid,g=(0,d.useCallback)(()=>{o.current&&(o.current.abort(),o.current=null),c.current&&(c.current.done(),c.current=null),i.current=null},[]),v=(0,d.useCallback)(()=>{if(!a||!h||!e)return;g(),o.current=new AbortController,c.current=new C;let t=(0,l.P)({prompt:c.current,websocket:{url:j(h,e)},abortController:o.current});(async()=>{try{for await(let n of t){var e=f.current;if("result"===n.type&&"granted"===Notification.permission){let t=new Notification(e?"Claude updated ".concat(e):"Update from Claude",{body:"Your task is ready for review",icon:"/favicon.svg",badge:"/favicon.svg"});t.onclick=()=>{window.focus(),t.close()}}m(e=>[...e,n])}}catch(e){s&&e instanceof Error&&"WebSocket connection aborted by user"!==e.message&&v()}})(),n(),i.current=t},[a,h,e,g,n,f,s]);return(0,d.useEffect)(()=>{v()},[v]),(0,d.useEffect)(()=>()=>g(),[g]),{inputStream:c.current,streamedMessages:u}}(e,t,s),c=(0,d.useMemo)(()=>a||!n?[]:n.data,[a,n]),u=(0,d.useMemo)(()=>{let e=new Set;for(let t of c)e.add(t.uuid);return e},[c]);return{loadingInitialMessages:a,inputStream:i,messages:(0,d.useMemo)(()=>{let e=[...c];for(let t of o)t.uuid&&!u.has(t.uuid)&&e.push(t);return e},[c,u,o])}}},22389:(e,t,n)=>{n.d(t,{r:()=>C,z:()=>A});var a=n(54568),r=n(41417),s=n(56370),i=n(90119),o=n(96377),l=n(32987),c=n(7620),d=n(46760),u=n(25465),m=n(37076),f=n(4705),p=n(62971);function h(e){let{platform:t,onClose:n,onConfirm:s,loading:i}=e,o=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:n,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-danger-000",children:[(0,a.jsx)(f.N,{size:20,weight:"bold"}),(0,a.jsx)(p.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(p.A,{defaultMessage:"Are you sure you want to disable the Canvas instance ‘{platformName}’?",id:"5Sw2NbmZOi",values:{platformName:t.name||o}})}),(0,a.jsxs)("div",{className:"p-3 bg-danger-100 border border-danger-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(p.A,{defaultMessage:"This action will:",id:"zvWv7FFtPu"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Temporarily disable Claude access from Canvas for this instance",id:"lIEPYlaaQV"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Prevent users from launching Claude from Canvas",id:"DeUCbJxieq"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Can be re-enabled at any time without reconfiguration",id:"wnmm8Q2qIC"})})]})]}),(0,a.jsx)("p",{className:"text-text-200 text-sm",children:(0,a.jsx)(p.A,{defaultMessage:"This Canvas instance will remain configured and can be re-enabled at any time.",id:"a5jT7TDFXC"})})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(r.$,{variant:"danger",onClick:()=>s(t.id),loading:i,children:(0,a.jsx)(p.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})}),(0,a.jsx)(r.$,{variant:"secondary",onClick:n,children:(0,a.jsx)(p.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var g=n(42952),v=n(17937);function x(e){let{platform:t,onClose:n,onConfirm:s,loading:i}=e,o=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:n,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-accent-secondary-000",children:[(0,a.jsx)(v.r,{size:20,weight:"bold"}),(0,a.jsx)(p.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(p.A,{defaultMessage:"Are you sure you want to enable the Canvas instance ‘{platformName}’?",id:"sltSpK2pM1",values:{platformName:t.name||o}})}),(0,a.jsxs)("div",{className:"p-3 bg-accent-main-100 border border-accent-main-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(p.A,{defaultMessage:"This will:",id:"+yrIUjrxTS"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Restore Claude access from Canvas for this instance",id:"6gypIwnFmn"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Allow users to launch Claude from Canvas again",id:"/aTphs8E3Z"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Reactivate the LTI integration for all users in your organization",id:"jX7w8Etxw8"})})]})]})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(r.$,{variant:"primary",onClick:()=>s(t.id),loading:i,children:(0,a.jsx)(p.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})}),(0,a.jsx)(r.$,{variant:"secondary",onClick:n,children:(0,a.jsx)(p.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var b=n(82258),y=n(82010),j=n(64707),w=n(15989),C=function(e){return e[e.TOOLS=0]="TOOLS",e[e.DISCONNECT=1]="DISCONNECT",e[e.REMOVE=2]="REMOVE",e[e.DISABLE=3]="DISABLE",e[e.EDIT_CANVAS=4]="EDIT_CANVAS",e[e.DISABLE_CANVAS=5]="DISABLE_CANVAS",e[e.ENABLE_CANVAS=6]="ENABLE_CANVAS",e}({});function A(e){let{type:t,server:n,actions:m}=e,f=(0,d.A)(),p=(0,i.V)(),[v,C]=(0,c.useState)(void 0),A=()=>C(void 0),{data:_}=(0,u.sr)(),S=(0,u.oo)({onSuccess:A}),N=(0,u.Ks)({onSuccess:A}),z=(0,u.LK)({onSuccess:A}),L=null==_?void 0:_[0];if(0===m.length)return;let M={0:f.formatMessage({defaultMessage:"Tools and settings",id:"8a8L0qsqhm"}),1:f.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"}),3:f.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),2:f.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),4:f.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),5:f.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),6:f.formatMessage({defaultMessage:"Enable",id:"TqSTI0/TZI"})},k=null;switch(v){case 0:k=(0,a.jsx)(w.J,{server:n,onClose:A});break;case 1:k=(0,a.jsx)(y.m,{type:t,server:n,onClose:A});break;case 3:k=(0,a.jsx)(b.u,{type:t,onClose:A});break;case 2:k=(0,a.jsx)(j.f,{server:n,onClose:A});break;case 4:k=L?(0,a.jsx)(g.S,{platform:L,onClose:A,onSubmit:(e,t,n,a)=>{S.mutate({platformId:e,canvas_url:t,client_id:n,name:"".concat(t," Canvas"),deployment_ids:[a]})},loading:S.isPending}):null;break;case 5:k=L?(0,a.jsx)(h,{platform:L,onClose:A,onConfirm:e=>{z.mutate({platformId:e,is_active:!1})},loading:z.isPending}):null;break;case 6:k=L?(0,a.jsx)(x,{platform:L,onClose:A,onConfirm:e=>{N.mutate({platformId:e,is_active:!0})},loading:N.isPending}):null}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.ms,{align:"end",trigger:(0,a.jsx)(r.$,{size:"icon",variant:"outline","aria-label":n?f.formatMessage({defaultMessage:"More options for {label}",id:"rKQPgfPvWS"},{label:n.name}):f.formatMessage({defaultMessage:"More options",id:"IzCVhGdYVc"}),children:(0,a.jsx)(o.H,{size:16,weight:"bold"})}),children:m.map(e=>(0,a.jsx)(s.tJ,{className:(0,l.A)("min-w-[175px]",[1,3,2,5].includes(e)&&"text-danger-000"),onClick:()=>{if(2===e&&(null==n?void 0:n.type)==="local"&&p){var t,a;null==(a=window.claudeAppBindings)||null==(t=a.openMcpSettings)||t.call(a,n.name)}else C(e)},children:M[e]},e))}),k]})}},24644:(e,t,n)=>{n.d(t,{E:()=>o});var a=n(54568),r=n(15964),s=n(46760),i=n(62971);function o(e){let{domain:t,setDomain:n,clientId:o,setClientId:l,deploymentId:c,setDeploymentId:d}=e,u=(0,s.A)();return(0,a.jsxs)("div",{className:"flex flex-col gap-3 mt-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.ks,{required:!0,label:u.formatMessage({defaultMessage:"Canvas Domain",id:"Aok65+sKzA"}),placeholder:u.formatMessage({defaultMessage:"https://school.instructure.com or https://canvas.myschool.edu",id:"VAjV+8SnM6"}),value:t,onValueChange:e=>n(e||""),onBlur:()=>n(t.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"Enter your Canvas domain (e.g., ‘https://school.instructure.com’ for hosted Canvas or ‘https://canvas.myschool.edu’ for self-hosted)",id:"uFbHowgMW9"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.ks,{required:!0,label:u.formatMessage({defaultMessage:"Client ID",id:"U5+MBCY8VU"}),placeholder:u.formatMessage({defaultMessage:"00000000000000",id:"BLrL/pjQgI"}),value:o,onValueChange:e=>l(e||""),onBlur:()=>l(o.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"The Client ID from your Canvas LTI app registration (found in Canvas Admin > Developer Keys)",id:"iV5X/WX6MA"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.ks,{required:!0,label:u.formatMessage({defaultMessage:"Deployment ID",id:"/h+RD9WlzS"}),placeholder:u.formatMessage({defaultMessage:"1",id:"Tf9Oo0DwqC"}),value:c,onValueChange:e=>d(e||""),onBlur:()=>d(c.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"The Deployment ID for your Canvas LTI integration",id:"iLMNAW31CI"})})]})]})}},25465:(e,t,n)=>{n.d(t,{AW:()=>u,Ks:()=>f,LK:()=>p,oo:()=>m,sr:()=>d});var a=n(77186),r=n(1761),s=n(65631),i=n(27062),o=n(87606);let l="lti_platforms";function c(){let{value:e}=(0,i.fS)("claude_ai_velvet_accordion");return e}let d=()=>{let{activeOrganization:e,account:t}=(0,r.YL)(),n=null==e?void 0:e.uuid,i=(0,s.yI)(t,e,s.Nt.OrganizationManage),o=c();return(0,a.Sk)("/api/organizations/".concat(n,"/lti/platforms"),{queryKey:[l,{orgUUID:n}],enabled:!!e&&!!n&&i&&o})},u=e=>{let t=(0,o.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)("/api/organizations/".concat(s,"/lti/platforms"),"PUT",{enabled:i,onSuccess:e=>{t.setQueryData([l,{orgUUID:s}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[l]})},onSettled:(e,n)=>{e&&!n&&(t.setQueryData([l,{orgUUID:s}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[l]}))},...e})},m=e=>{let t=(0,o.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(s,"/lti/platforms/").concat(t)},"POST",{enabled:i,onSuccess:(e,n)=>{t.setQueryData([l,{orgUUID:s}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[l]})},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([l,{orgUUID:s}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[l]}))},...e})},f=e=>{let t=(0,o.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(s,"/lti/platforms/").concat(t)},"POST",{enabled:i,onMutate:e=>e,onSuccess:(e,n)=>{t.setQueryData([l,{orgUUID:s}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[l]})},onError:()=>{},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([l,{orgUUID:s}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[l]}))},...e})},p=e=>{let t=(0,o.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(s,"/lti/platforms/").concat(t)},"POST",{enabled:i,onMutate:e=>e,onSuccess:(e,n)=>{t.setQueryData([l,{orgUUID:s}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[l]})},onError:()=>{},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([l,{orgUUID:s}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[l]}))},...e})}},41417:(e,t,n)=>{n.d(t,{$:()=>f});var a=n(54568),r=n(18179),s=n(12072),i=n(615),o=n(32987),l=n(27261),c=n.n(l),d=n(7620);let u="\n    text-text-000\n    font-base-bold\n    border-0.5\n    border-border-200\n    relative\n    overflow-hidden\n    transition\n    duration-100\n    hover:border-border-300/0\n    bg-bg-300/0\n    hover:bg-bg-400\n    backface-hidden",m=(0,i.F)("inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  can-focus\n  select-none\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none",{variants:{variant:{primary:"bg-text-000\n        text-bg-000\n        font-base-bold\n        relative\n        overflow-hidden\n        transition-transform\n        will-change-transform\n        ease-[cubic-bezier(0.165,0.85,0.45,1)]\n        duration-150\n        hover:scale-y-[1.015]\n        hover:scale-x-[1.005]\n        backface-hidden\n        after:absolute\n        after:inset-0\n        after:bg-[radial-gradient(at_bottom,hsla(var(--bg-000)/20%),hsla(var(--bg-000)/0%))]\n        after:opacity-0\n        after:transition\n        after:duration-200\n        after:translate-y-2\n        hover:after:opacity-100\n        hover:after:translate-y-0",flat:"bg-accent-main-000\n          text-oncolor-100\n          font-base-bold\n          transition-colors\n          hover:bg-accent-main-200\n          focus:!outline-accent-main-100/75",secondary:u,outline:u,ghost:"text-text-300\n          border-transparent\n          transition\n          font-ui\n          tracking-tight\n          duration-300\n          ease-[cubic-bezier(0.165,0.85,0.45,1)]\n          hover:bg-bg-300\n          aria-checked:bg-bg-400\n          aria-expanded:bg-bg-400\n          hover:text-text-100\n          aria-pressed:text-text-100\n          aria-checked:text-text-100\n          aria-expanded:text-text-100",underline:"opacity-80\n          transition-all\n          active:scale-[0.985]\n          hover:opacity-100\n          hover:underline\n          underline-offset-3\n          rounded",danger:"bg-danger-200\n          text-oncolor-100\n          font-base-bold\n          transition\n          hover:scale-y-[1.015]\n          hover:scale-x-[1.005]\n          hover:opacity-95\n          focus:!outline-danger-100/50",unstyled:""},size:{default:"h-9 px-4 py-2 rounded-lg min-w-[5rem] active:scale-[0.985] whitespace-nowrap",sm:"h-8 rounded-md px-3 min-w-[4rem] active:scale-[0.985] whitespace-nowrap !text-xs",lg:"h-11 rounded-[0.6rem] px-5 min-w-[6rem] active:scale-[0.985] whitespace-nowrap !text-base",icon:"h-9 w-9 rounded-md active:scale-95 shrink-0",icon_xs:"h-6 w-6 rounded-md active:scale-95",icon_sm:"h-8 w-8 rounded-md active:scale-95",icon_lg:"h-11 w-11 rounded-[0.6rem] active:scale-95",inline:"px-0.5 rounded-[0.25rem]",unset:""},option:{rounded:"!rounded-full",prepend:"",append:""},state:{active:""}},compoundVariants:[{size:"default",option:"prepend",class:"pl-2 pr-3 gap-1"},{size:"lg",option:"prepend",class:"pl-2.5 pr-3.5 gap-1"},{size:"sm",option:"prepend",class:" pl-2 pr-2.5 gap-1"},{size:"default",option:"append",class:"pl-3 pr-2 gap-1"},{size:"lg",option:"append",class:"pl-3.5 pr-2.5 gap-1"},{size:"sm",option:"append",class:"pl-2.5 pr-2 gap-1"},{variant:"ghost",state:"active",class:"!bg-bg-400"}],defaultVariants:{variant:"primary",size:"default"}}),f=(0,d.forwardRef)((e,t)=>{let{className:n,variant:i,size:l,option:d,loading:u,href:f,onLinkClick:p,target:h,prepend:g,append:v,state:x,disabled:b,children:y,type:j="button",tooltip:w,tooltipSide:C="bottom",tooltipDelay:A,tooltipDisabled:_,tooltipHoverable:S=!1,...N}=e;g&&(d="prepend"),v&&(d="append");let z=(0,o.A)(m({variant:i,size:l,option:d,state:x,className:n}),u&&"text-transparent ![text-shadow:_none]"),L=(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)("div",{className:(0,o.A)("absolute inset-0 flex items-center justify-center",i&&"flat"!==i&&"danger"!==i?"secondary"===i?"text-text-400":"text-bg-300":"text-bg-000"),children:(0,a.jsx)(r.Loading,{size:"sm",inheritColor:!0,delay:0})}),g,y,v]}),M=f?(0,a.jsx)(c(),{href:f,target:h||"_self",className:z,"aria-label":N["aria-label"],onClick:p,children:L}):(0,a.jsx)("button",{className:z,ref:t,disabled:b||u,type:j,...N,children:L});return w?(0,a.jsx)(s.Tooltip,{tooltipContent:w,side:C,delayDuration:A,disableHoverableContent:!S,children:(0,a.jsx)("div",{className:"w-fit",children:M})}):M});f.displayName="Button"},42952:(e,t,n)=>{n.d(t,{S:()=>c});var a=n(54568),r=n(41417),s=n(37076),i=n(7620),o=n(62971),l=n(24644);function c(e){var t;let{platform:n,onClose:c,onSubmit:d,loading:u}=e,[m,f]=(0,i.useState)(n.issuer),[p,h]=(0,i.useState)(n.client_id),[g,v]=(0,i.useState)((null==(t=n.deployment_ids)?void 0:t[0])||""),x=!m.trim()||!p.trim()||!g.trim();return(0,a.jsx)(s.aF,{isOpen:!0,onClose:c,modalSize:"xl",title:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)(o.A,{defaultMessage:"Edit Canvas Instance",id:"aBsNZWVKN+"})}),subtitle:(0,a.jsx)(o.A,{defaultMessage:"Update your Canvas LMS instance configuration",id:"FqSEGC5V7F"}),children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x||d(n.id,m.trim().replace(/\/$/,""),p.trim(),g.trim())},className:"flex flex-col",children:[(0,a.jsx)(l.E,{domain:m,setDomain:f,clientId:p,setClientId:h,deploymentId:g,setDeploymentId:v}),(0,a.jsxs)(s.vW,{children:[(0,a.jsx)(r.$,{type:"submit",loading:u,disabled:x,children:(0,a.jsx)(o.A,{defaultMessage:"Save Changes",id:"3VI9mt1zm0"})}),(0,a.jsx)(r.$,{variant:"secondary",onClick:c,children:(0,a.jsx)(o.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})})}},44077:(e,t,n)=>{n.d(t,{R:()=>o});var a=n(54568),r=n(7620),s=n(41417),i=n(37076);let o=(0,r.memo)(e=>{let{isOpen:t,onClose:n,onConfirm:o,title:l,message:c,confirmText:d="Confirm",cancelText:u="Cancel",variant:m="primary",isLoading:f,disabled:p=!1,autoFocus:h=!0,testId:g,children:v,size:x="sm"}=e,[b,y]=(0,r.useState)(!1),j=null!=f?f:b,w=(0,r.useCallback)(async()=>{if(!p&&!j){y(!0);try{let e=o();e&&"function"==typeof e.then&&await e,n()}finally{y(!1)}}},[o,n,p,j]),C=(0,r.useCallback)(()=>{j||n()},[n,j]);return(0,a.jsxs)(i.aF,{isOpen:t,onClose:C,title:l,modalSize:x,closeOnEscapeKeydown:!j,children:[(0,a.jsxs)("div",{className:"mt-1 mb-2",children:[c&&(0,a.jsx)("div",{className:"text-text-300 whitespace-pre-line",children:c}),v]}),(0,a.jsxs)(i.vW,{children:[(0,a.jsx)(s.$,{variant:"secondary",onClick:C,disabled:j,children:u}),(0,a.jsx)(s.$,{variant:"danger"===m?"danger":"primary",onClick:w,disabled:p||j,loading:j,autoFocus:h,"data-testid":g||"confirmation-modal-confirm",children:d})]})]})});o.displayName="ConfirmationModal"},45270:(e,t,n)=>{n.d(t,{Ou:()=>g,Xd:()=>v});var a=n(17411),r=n(27062),s=n(77101),i=n(37428),o=n(21036),l=n(25465),c=n(85717),d=n(65671),u=n(97949),m=n(45715),f=n(91768),p=n(22389);function h(){let{value:e}=(0,r.fS)("kingfisher_enabled"),t=(0,c.LP)(),{isDriveAuthenticated:n}=(0,c.cI)(),{value:a}=(0,r.fS)("pumpernickel_enabled"),i=(0,f.Ys)(s.v8.GMAIL),{isAuthenticated:l}=(0,f.ob)(s.v8.GMAIL),d=(0,f.Ys)(s.v8.GCAL),{isAuthenticated:u}=(0,f.ob)(s.v8.GCAL),m=(0,f.Ys)(s.v8.SLACK),{isAuthenticated:p}=(0,f.ob)(s.v8.SLACK),h=(0,o.useLayer)("trials_freemium").get("free_integrations",!1);return{[s.v8.GDRIVE]:{type:s.v8.GDRIVE,available:e||h,enabledForOrg:t,connected:n},[s.v8.GMAIL]:{type:s.v8.GMAIL,available:a||h,enabledForOrg:i,connected:l},[s.v8.GCAL]:{type:s.v8.GCAL,available:a||h,enabledForOrg:d,connected:u},[s.v8.SLACK]:{type:s.v8.SLACK,available:m,enabledForOrg:m,connected:p}}}let g=h;function v(){let e=Object.values(h()),t=(0,u.Cq)(),{isGithubAuthenticated:n}=(0,u.nB)({fetchImmediately:!0}),o=(0,i.wc)()[i.j$]||"invalid",{data:c}=(0,a.Jh)(o),g=c&&c.length>0,{value:v}=(0,r.fS)("spider_enabled_2"),x=(0,m.AI)(),{isOutlineAuthenticated:b}=(0,m.I5)(),{value:y}=(0,r.fS)("cinnabon_enabled"),j=(0,f.Ys)(s.v8.SALESFORCE),{isAuthenticated:w}=(0,f.ob)(s.v8.SALESFORCE),C=(0,f.Ys)(s.v8.ASANA),{isAuthenticated:A}=(0,f.ob)(s.v8.ASANA),{value:_}=(0,r.fS)("claude_ai_ember"),{value:S}=(0,r.fS)("claude_ai_velvet_accordion"),{data:N}=(0,l.sr)(),z=((null==N?void 0:N.filter(e=>e.is_active))||[]).length>0,L=(0,d.w5)(),{isAuthenticated:M}=(0,d.eF)();return[...e,...g?[{type:s.v8.CUTTLEFISH,available:!0,enabledForOrg:!0,connected:!0}]:[],{type:s.v8.GITHUB,available:!0,enabledForOrg:t,connected:n},{type:s.v8.OUTLINE,available:v&&!1,enabledForOrg:x,connected:b},{type:s.v8.SALESFORCE,available:y,enabledForOrg:j,connected:w},{type:s.v8.ASANA,available:y,enabledForOrg:C,connected:A},{type:s.v8.FIDDLEHEAD,available:!1,enabledForOrg:L,connected:M},{type:s.v8.CANVAS,available:_&&S&&!0,enabledForOrg:z,connected:z,connectedActions:z?[p.r.EDIT_CANVAS,p.r.DISABLE_CANVAS]:[],disconnectedActions:[]}].filter(e=>e.available)}},45715:(e,t,n)=>{n.d(t,{AI:()=>c,I5:()=>d,n0:()=>l,qp:()=>u,so:()=>m});var a=n(77186),r=n(1761),s=n(71473);n(77101);var i=n(87606);n(7620);var o=n(91768);let l=e=>{let{uri:t}=e,{data:n,isLoading:i}=(e=>{let{documentId:t}=e,{account:n,activeOrganization:i}=(0,r.YL)(),o=null==n?void 0:n.uuid,l=null==i?void 0:i.uuid,d=c();return(0,a.Sk)("/api/organizations/".concat(l,"/sync/mcp/outline/document/").concat(t),{queryKey:[s.hq,{accountUUID:o,orgUUID:l,documentId:t}],enabled:d})})({documentId:t});return{title:null==n?void 0:n.title,isLoading:i}},c=()=>{let{data:e}=(0,o.LN)();return!1},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid,o=c(),{data:l,refetch:d}=(0,a.Sk)("/api/organizations/".concat(i,"/sync/mcp/outline/auth"),{queryKey:[s.iP,{accountUUID:null==t?void 0:t.uuid,orgUUID:i}],enabled:!!(n&&o),staleTime:5e3}),{mutate:u,isPending:m}=(0,a.L2)("/api/organizations/".concat(i,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(n&&o),...e,onSuccess:function(){for(var t,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];null==(t=e.onSuccess)||t.call(e,...a)}});return{isOutlineAuthenticated:!!(null==l?void 0:l.is_authenticated),refetch:d,initOutlineAuth:u,isLoadingOutlineAuthInit:m}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,r.YL)(),o=null==t?void 0:t.uuid,l=null==n?void 0:n.uuid,d=c(),u=(0,i.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(l,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(n&&d),...e,onSuccess:function(){for(var t,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];u.invalidateQueries({queryKey:[s.iP,{accountUUID:o,orgUUID:l}]}),null==(t=e.onSuccess)||t.call(e,...a)}})},m=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/connectors?redirect_url=".concat(e,"&open_outline_auth=true")}},47823:(e,t,n)=>{n.d(t,{cG:()=>A,fI:()=>w,lg:()=>y,sd:()=>j,zA:()=>C});var a=n(54568),r=n(18472),s=n(8027),i=n(11515),o=n(1761),l=n(69916),c=n(86030),d=n(34059),u=n(1385),m=n(12072),f=n(9786),p=n(65631),h=n(77101),g=n(32987);n(7620);var v=n(46760),x=n(62971),b=n(87907);function y(){let{account:e,activeOrganization:t}=(0,o.YL)(),n=(0,p.pG)(e,t,"claude-ai"),a=(0,p.yI)(e,t,p.Nt.IntegrationsManage),r=(0,o.mV)();return{manageFromOrg:r&&(a||n),manageFromPersonal:!r}}function j(e){let{url:t}=e,{copyToClipboard:n}=(0,f.C)(),{addSuccess:r}=(0,l.Y)(),s=(0,v.A)(),i=t.length>50?"".concat(t.substring(0,47),"..."):t;return(0,a.jsx)(m.Tooltip,{tooltipContent:(0,a.jsx)(x.A,{defaultMessage:"Copy URL",id:"P8QaSQLfW+"}),side:"bottom",align:"start",children:(0,a.jsx)("div",{className:"text-sm text-text-400 cursor-pointer hover:text-text-300 transition-colors truncate",onClick:()=>{n(t),r(s.formatMessage({defaultMessage:"Server URL copied",id:"Izgggpt47N"}))},children:i})})}function w(e){let{type:t,server:n,connected:o,children:l,isInDirectory:u=!1}=e,m=(0,b.ak)(),f=n?!n.isConnected:t&&!1===o,p=t===h.v8.FIDDLEHEAD?m(t):null==n?void 0:n.name;return(0,a.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.O,{size:42,className:(0,g.A)(f&&"opacity-50"),children:(0,a.jsx)(d.A9,{type:t,size:24})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-0 relative bottom-px",children:[(0,a.jsx)("span",{className:(0,g.A)("truncate",f&&"text-text-400"),children:m(t)}),f&&(0,a.jsx)("div",{className:"text-sm text-text-500",children:(0,a.jsx)(x.A,{defaultMessage:"Disconnected",id:"FZeQlcp+xX"})})]})]}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.O,{size:42,className:(0,g.A)(f&&"opacity-50"),children:(0,a.jsx)(i.d,{url:n.url,fallbackSvg:(0,a.jsx)(s.B,{hideBorder:!0,letter:p||"?",size:24}),size:24})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-0 relative bottom-px",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("span",{className:(0,g.A)("truncate",f&&"text-text-400"),children:p}),!u&&(0,a.jsx)(c.E,{children:"remote"===n.type?(0,a.jsx)(x.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"}):(0,a.jsx)(x.A,{defaultMessage:"LOCAL DEV",id:"S14UXqQo+W"})})]}),f?(0,a.jsx)("div",{className:"text-sm text-text-500",children:(0,a.jsx)(x.A,{defaultMessage:"Disconnected",id:"FZeQlcp+xX"})}):n.url&&!u&&(0,a.jsx)(j,{url:n.url})]})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"flex gap-3 items-center",children:l})]})}function C(){return(0,a.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,a.jsx)(u.j,{width:42,height:42,rounded:"lg",variant:"light"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(u.j,{width:120,height:20,rounded:"md",variant:"light"}),(0,a.jsx)(u.j,{width:80,height:16,rounded:"md",variant:"light"})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"flex gap-3 items-center",children:(0,a.jsx)(u.j,{width:80,height:32,rounded:"md",variant:"light"})})]})}function A(e){let{className:t}=e;return(0,a.jsx)("div",{className:(0,g.A)("border-t-[0.5px] border-border-300 m-2",t)})}},64359:(e,t,n)=>{n.d(t,{r:()=>l});var a=n(54568),r=n(32987),s=n(39152),i=n.n(s),o=n(7620);function l(e){let{direction:t="vertical",disabled:n,containerClassName:s,className:l,gradientHeight:c=24,hideTopGradient:d=!1,hideBottomGradient:u=!1,contentHeightMayChange:m=!1,containerHeightMayChange:f=!1,children:p,...h}=e,g=(0,o.useRef)(null),v=(0,o.useRef)(null),[x,b]=(0,o.useState)(!0),[y,j]=(0,o.useState)(!0),w=(0,o.useRef)(x),C=(0,o.useRef)(y),A=i()((0,o.useCallback)(()=>{let e=v.current;e&&(("vertical"===t?e.scrollHeight-e.scrollTop-e.clientHeight<=1:e.scrollWidth-e.scrollLeft-e.clientWidth<=1)?w.current||(b(!0),w.current=!0):w.current&&(b(!1),w.current=!1),("vertical"===t?e.scrollTop:e.scrollLeft)<=0?C.current||(j(!0),C.current=!0):C.current&&(j(!1),C.current=!1))},[t]),150);return(0,o.useEffect)(()=>{A()},[A]),(0,o.useEffect)(()=>{if(!g.current||!m)return;let e=new ResizeObserver(A);return e.observe(g.current),()=>{e.disconnect()}},[A,m]),(0,o.useEffect)(()=>{if(!v.current||!f)return;let e=new ResizeObserver(A);return e.observe(v.current),()=>{e.disconnect()}},[A,f]),(0,a.jsx)("div",{style:{maskImage:n?void 0:"linear-gradient(to ".concat("vertical"===t?"bottom":"right",", transparent 0%, black ").concat(y||d?0:c,"px, black calc(100% - ").concat(x||u?0:c,"px), transparent 100%)")},className:(0,r.A)("vertical"===t?"min-h-0":"min-w-0",s),children:(0,a.jsx)("div",{onScroll:n?void 0:A,ref:v,className:(0,r.A)("vertical"===t?"overflow-y-auto overflow-x-hidden min-h-0":"overflow-x-auto overflow-y-hidden min-w-0",l),...h,children:m?(0,a.jsx)("div",{ref:g,children:p}):p})})}},64707:(e,t,n)=>{n.d(t,{f:()=>u});var a=n(54568),r=n(1761),s=n(69916),i=n(41417),o=n(37076),l=n(46760),c=n(62971),d=n(70659);function u(e){var t;let{onClose:n,server:u}=e,m=(0,l.A)(),f=(0,r.mV)(),{activeOrganization:p}=(0,r.YL)(),{addError:h}=(0,s.Y)(),g=u.name,{mutate:v,isPending:x}=(0,d.ll)((null==p?void 0:p.uuid)||"",null!=(t=u.uuid)?t:"",{onSuccess:n,onError:e=>{h(m.formatMessage({defaultMessage:"Failed to disconnect server",id:"zX14mjXCQK"}),{error:e})}});return(0,a.jsxs)(o.aF,{isOpen:!0,onClose:n,title:f?m.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:g}):m.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:g}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:g}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(c.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:g}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:g}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(c.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),(0,a.jsxs)(o.vW,{layout:"right",children:[(0,a.jsx)(i.$,{onClick:n,variant:"secondary",children:(0,a.jsx)(c.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(i.$,{loading:x,onClick:()=>v(),variant:"danger",children:(0,a.jsx)(c.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}},65671:(e,t,n)=>{n.d(t,{Qp:()=>u,eF:()=>d,w5:()=>c});var a=n(77186),r=n(1761),s=n(27062),i=n(37428),o=n(87606),l=n(62942);let c=()=>(0,s.fS)("fiddlehead").value,d=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=c(),s=(0,i.wc)(),{data:o,isFetched:d}=(0,a.Sk)("/api/oauth/organizations/".concat(t,"/oauth_tokens"),{enabled:!!(t&&n),staleTime:3e5}),u=(0,l.useSearchParams)().get("debug_fiddlehead_auth_override"),m=s[i.me],f=m&&(null==o?void 0:o.some(e=>e.application_name===m));return{isAuthenticated:null!==u?"1"===u:f,isFetched:d,initAuth:()=>{window.open(s[i.vf],"_blank")}}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,s=c(),i=(0,o.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/fiddlehead/disconnect_and_delete_all"),"POST",{enabled:!!(t&&s),...e,onSuccess:function(){for(var t,a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];i.invalidateQueries({queryKey:["/api/oauth/organizations/".concat(n,"/oauth_tokens")]}),null==(t=e.onSuccess)||t.call(e,...r)}})}},70659:(e,t,n)=>{n.d(t,{vW:()=>N,R4:()=>S,qb:()=>j,ll:()=>w,eB:()=>y,W3:()=>C,lu:()=>x,p9:()=>b,p4:()=>_});var a=n(98518),r=n(77186),s=n(1761),i=n(69916),o=n(71473),l=n(27062),c=n(44180),d=n(87606),u=n(7620),m=n(75006),f=n(19864),p=n(16253),h=n(62370);function g(e){let t=window.atob(e),n=new ArrayBuffer(t.length),a=new Uint8Array(n);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return n}let v=m.Ay.object({uuid:m.Ay.string().uuid(),name:m.Ay.string(),url:m.Ay.string(),created_at:m.Ay.string().datetime(),updated_at:m.Ay.string().datetime(),custom_oauth_client_id:m.Ay.string().nullable().optional(),custom_oauth_client_secret:m.Ay.string().nullable().optional(),is_authenticated:m.Ay.boolean().default(!1)}),x=()=>{let{value:e}=(0,l.fS)("papi_mcp");return e},b=()=>{let{value:e}=(0,l.fS)("papi_mcp_remote");return e};function y(e,t){let n=x(),a=b();return(0,r.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[o.lA,e],enabled:!a&&n&&!!e,...t,select:e=>m.z.array(v).parse(e)})}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,{track:s}=(0,a.st)(),i=(0,d.useQueryClient)(),l=b();return(0,r.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(a,r,c)=>{var d;l&&A(i,e,a.uuid,"create",a),i.invalidateQueries({queryKey:[o.lA,e]}),i.invalidateQueries({queryKey:[o.qE,e]}),null==(d=t.onSuccess)||d.call(t,a,r,c),s({event_key:"claudeai.mcp.create_server",source:n.source,url:a.url,type:"remote"})}})}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,d.useQueryClient)(),s=b();return(0,r.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...n,onSettled:()=>{(0,h.eg)(t)},onSuccess:(r,i,l)=>{var c;s&&A(a,e,t,"delete"),a.invalidateQueries({queryKey:[o.lA,e]}),a.invalidateQueries({queryKey:[o.qE,e]}),null==(c=n.onSuccess)||c.call(n,r,i,l)}})}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,d.useQueryClient)(),s=b();return(0,r.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...n,onSettled:()=>{(0,h.Ug)(t)},onSuccess:(r,i,l)=>{var c;s&&A(a,e,t,"logout",{connected:!1,tools:[],prompts:[],resources:[]}),a.invalidateQueries({queryKey:[o.lA,e]}),a.invalidateQueries({queryKey:[o.qE,e]}),null==(c=n.onSuccess)||c.call(n,r,i,l)}})}async function A(e,t,n,a,r){try{e.setQueryData([o.$d,t],e=>{let t=null!=e?e:[];switch(a){case"create":return[...t,r].sort((e,t)=>e.name.localeCompare(t.name));case"update":case"logout":return t.map(e=>e.uuid===n?{...e,...r}:e).sort((e,t)=>e.name.localeCompare(t.name));case"delete":return t.filter(e=>e.uuid!==n)}});let s=await fetch("/api/organizations/".concat(t,"/mcp/bootstrap")),i=await s.json();e.setQueryData([o.$d,t],i)}catch(e){(0,c.Cp)(e,{tags:{action:"updateBootstrapData"},extra:{orgUuid:t,action:a,serverUuid:n}})}}function _(e){let t=b(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid;return(0,r.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!a&&t})}function S(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=b(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid;return(0,r.L2)("/api/organizations/".concat(a,"/mcp/attach_resource"),"POST",{enabled:t&&!!a,...e})}(),t=z(),{addError:n}=(0,i.Y)(),o=b(),l=function(){let{addError:e}=(0,i.Y)(),{track:t}=(0,a.st)(),{handleUpload:n}=(0,f.o)();return(0,u.useCallback)(async(a,r)=>{try{let e=(await (0,h.KU)(a).readResource({uri:r.uri},{timeout:15e3})).contents.map(e=>{let n;return"text"in e?(n=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(n=g(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([n],r.name,{type:e.mimeType})});e.length>0&&await n(e)}catch(t){e("Failed to upload resource. You can try again.",{error:t})}},[t,e,n])}();return(0,u.useCallback)(async a=>{let{serverUuid:r,resource:s,onClose:i}=a;if(!o)return l(r,s);try{let n=(0,h.KU)(r),a=await n.readResource({uri:s.uri},{timeout:15e3}),o=await e({resource:s,server_uuid:r,result:a});t(o),null==i||i()}catch(e){n("Failed to attach resource. You can try again.",{error:e,errorContext:{tags:{action:"attach_resource"},extra:{serverUuid:r}}})}},[e,t,n,o,l])}function N(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=b(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid;return(0,r.L2)("/api/organizations/".concat(a,"/mcp/attach_prompt"),"POST",{enabled:t&&!!a,...e})}(),n=z(),{addError:o}=(0,i.Y)(),l=b(),c=function(e){let{track:t}=(0,a.st)(),{addError:n}=(0,i.Y)(),{handleUpload:r}=(0,f.o)();return(0,u.useCallback)(async(a,s,i)=>{try{let n=await (0,h.KU)(a).getPrompt({name:s.name,arguments:i},{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(i).length,assistant_messages:n.messages.filter(e=>"assistant"===e.role).length,user_messages:n.messages.filter(e=>"user"===e.role).length,text_messages:n.messages.filter(e=>"text"===e.content.type).length,image_messages:n.messages.filter(e=>"image"===e.content.type).length});let o=(e,t)=>{let n=e=>{let t=p._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},a=e=>"".concat(s.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],a("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([g(e.content.data)],a(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var r;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(r=t.mimeType)?r:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let a=n(t.mimeType);return new File([g(t.blob)],"".concat(t.uri,".").concat(a),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===n.messages.length)await r([o(n.messages[0],0)]);else if(n.messages.length>1){let e=n.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[o(e,t)]:[]),t=n.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let n=JSON.stringify(t,null,2);e.push(new File([n],"".concat(s.name,"_messages.json"),{type:"application/json"}))}await r(e)}null==e||e()}catch(e){n("Failed to get prompt. You can try again.",{error:e})}},[t,n,r,e])}(e);return(0,u.useCallback)(async a=>{let{serverUuid:r,prompt:s,args:i}=a;if(!l)return c(r,s,i);try{let a=(0,h.KU)(r),o=await a.getPrompt({name:s.name,arguments:i},{timeout:15e3}),l=await t({prompt:s,arguments:i,server_uuid:r,result:o});n(l),null==e||e()}catch(e){o("Failed to attach prompt. You can try again.",{error:e,errorContext:{tags:{action:"attach_prompt"},extra:{serverUuid:r}}})}},[t,n,o,e,l,c])}function z(){let{setAttachments:e,setFiles:t}=(0,f.o)();return(0,u.useCallback)(n=>{let{files:a,attachments:r}=n;a&&a.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...a.filter(e=>!t.has(e.file_uuid))]}),r&&r.length>0&&e(e=>Array.from(new Set([...e,...r].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}m.z.object({name:m.z.string(),url:m.z.string(),custom_oauth_client_id:m.z.string().nullable().optional(),custom_oauth_client_secret:m.z.string().nullable().optional()}),m.z.object({name:m.z.string().optional().nullable(),url:m.z.string().optional().nullable()})},82010:(e,t,n)=>{n.d(t,{m:()=>v});var a=n(54568),r=n(17411),s=n(1761),i=n(69916),o=n(44077),l=n(77101),c=n(37428),d=n(46760),u=n(70659),m=n(85717),f=n(65671),p=n(97949),h=(n(45715),n(91768)),g=n(87907);function v(e){let{type:t,server:n,onClose:r}=e;if(n)return(0,a.jsx)(j,{server:n,onClose:r});switch(t){case l.v8.GITHUB:return(0,a.jsx)(x,{onClose:r});case l.v8.GDRIVE:return(0,a.jsx)(b,{onClose:r});case l.v8.OUTLINE:return;case l.v8.FIDDLEHEAD:return(0,a.jsx)(w,{onClose:r});case l.v8.CUTTLEFISH:return(0,a.jsx)(C,{onClose:r});default:return(0,a.jsx)(y,{type:t,onClose:r})}}function x(e){let{onClose:t}=e,{mutate:n,isPending:r}=(0,p.rW)();return(0,a.jsx)(A,{name:"GitHub",onDisconnect:n,disconnecting:r,onClose:t})}function b(e){let{onClose:t}=e,{mutate:n,isPending:r}=(0,m.U5)(),s=(0,d.A)();return(0,a.jsx)(A,{name:"Google Drive",onDisconnect:n,disconnecting:r,onClose:t,modalMessageOverride:s.formatMessage({defaultMessage:"You won’t be able to continue any previous chats that reference content from Google Docs.",id:"Zi7eVRnAwf"})})}function y(e){let{type:t,onClose:n}=e,{disconnect:r}=(0,h.ob)(t);return(0,a.jsx)(A,{name:(0,g.xI)(t),onDisconnect:r,disconnecting:!1,onClose:n})}function j(e){let{server:t,onClose:n}=e,r=(0,d.A)(),{activeOrganization:o}=(0,s.YL)(),{addError:l}=(0,i.Y)(),{mutate:c,isPending:m}=(0,u.W3)((null==o?void 0:o.uuid)||"",t.uuid,{onError:e=>{l(r.formatMessage({defaultMessage:"Failed to disconnect from server",id:"L488a5jdgF"}),{error:e})}});return(0,a.jsx)(A,{name:t.name,onDisconnect:c,disconnecting:m,onClose:n})}function w(e){let{onClose:t}=e,{mutate:n,isPending:r}=(0,f.Qp)(),s=(0,g.ak)(),i=(0,c.wc)(),o=i[c.BU],d=i[c.jT],u=i[c.fh];return(0,a.jsx)(A,{name:s(l.v8.FIDDLEHEAD),onDisconnect:n,disconnecting:r,onClose:t,modalMessageOverride:o,modalTitleOverride:d,modalButtonOverride:u})}function C(e){let{onClose:t}=e,{mutate:n,isPending:s}=(0,r.fH)(),i=(0,g.ak)();return(0,a.jsx)(A,{name:i(l.v8.CUTTLEFISH),onDisconnect:n,disconnecting:s,onClose:t})}function A(e){let{name:t,onDisconnect:n,disconnecting:r,onClose:s,modalMessageOverride:i,modalTitleOverride:l,modalButtonOverride:c}=e,u=(0,d.A)(),m=null!=l?l:u.formatMessage({defaultMessage:"Disconnect {integrationName}?",id:"MUrNVj88RO"},{integrationName:t}),f=null!=c?c:u.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"}),p=null!=i?i:u.formatMessage({defaultMessage:"You can still continue previous chats that reference {integrationName} content. However, Claude won’t be able to access new content or perform new tasks.",id:"tlmLidjA7e"},{integrationName:t});return(0,a.jsx)(o.R,{isOpen:!0,onClose:s,title:m,onConfirm:()=>{n(),s()},confirmText:f,variant:"danger",autoFocus:!1,message:p,size:"md",isLoading:r})}},82258:(e,t,n)=>{n.d(t,{u:()=>g});var a=n(54568),r=n(1761),s=n(41417),i=n(91926),o=n(37076),l=n(12072),c=n(77101),d=n(38583),u=n(7620),m=n(46760),f=n(62971),p=n(91768),h=n(87907);function g(e){let{type:t,onClose:n}=e,i=(0,r.mV)(),l=(0,m.A)(),{mutate:d,isPending:g}=(0,p.xc)({onSuccess:n}),[x,b]=(0,u.useState)(!1),y=(0,h.xI)(t);return(0,a.jsxs)(o.aF,{isOpen:!0,onClose:n,title:i?l.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:y}):l.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:y}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:y}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(f.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:y}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:y}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(f.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),t===c.v8.GITHUB&&(0,a.jsx)(v,{shouldDeleteOnDisable:x,setShouldDeleteOnDisable:b}),(0,a.jsxs)(o.vW,{children:[(0,a.jsx)(s.$,{onClick:n,variant:"secondary",children:(0,a.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(s.$,{loading:g,onClick:()=>{d({type:t,enabled:!1,should_delete_on_disable:x}),n()},variant:"danger",children:x?(0,a.jsx)(f.A,{defaultMessage:"Disconnect and delete cached files",id:"cpicqQfn34"}):(0,a.jsx)(f.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}function v(e){let{shouldDeleteOnDisable:t,setShouldDeleteOnDisable:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsx)(i.f,{checkState:t?"checked":"unchecked",onClick:e=>{let{didCheck:t}=e;return n(t)},label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-text-200",children:(0,a.jsx)(f.A,{defaultMessage:"Permanently delete cached GitHub files",id:"QWSlg2jyOj"})}),(0,a.jsx)(l.Tooltip,{tooltipContent:(0,a.jsx)(f.A,{defaultMessage:"We will never delete any files from GitHub, only files cached by claude.ai",id:"V7mFrvJBWC"}),children:(0,a.jsx)(d.R,{className:"text-text-400"})})]})})}),t&&(0,a.jsx)("div",{className:"flex items-start align-top min-h-[5rem] gap-2 mb-10 ml-10 text-danger-000",children:(0,a.jsxs)("ul",{className:"text-sm list-disc",children:[(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"File deletion will begin a few minutes after submission.",id:"09chittDG9"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"All files cached from GitHub will be permanently deleted from claude.ai.",id:"F1B0dvW0IP"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"An audit log will be written when deletion has completed.",id:"aNLDY0cpk9"})})]})})]})}},86030:(e,t,n)=>{n.d(t,{E:()=>s});var a=n(54568),r=n(32987);let s=e=>{let{color:t="default",size:n="default",children:s,className:i,uppercase:o}=e;return(0,a.jsx)("div",{className:(0,r.$)("inline-flex items-center align-middle leading-none flex-shrink-0","default"===t&&"bg-gradient-to-bl  from-bg-500/30  to-bg-500/70 text-text-300","flat"===t&&"bg-bg-500/40 text-text-200","secondary"===t&&"bg-accent-secondary-900/40 text-accent-secondary-200","pro"===t&&"bg-gradient-to-bl  from-accent-pro-200  to-accent-pro-100  text-oncolor-100","main"===t&&"bg-gradient-to-bl  from-accent-main-200/70  to-accent-main-100  text-oncolor-100","danger"===t&&"bg-danger-900 text-danger-200","default"===n&&"h-5 px-1.5 rounded-md text-[0.625rem]","sm"===n&&"h-4 px-1 rounded text-[0.625rem]","lg"===n&&"h-6 px-2 rounded-lg text-xs",o&&"uppercase tracking-[0.015rem]",i),children:s})}},87907:(e,t,n)=>{n.d(t,{ak:()=>o,cO:()=>s,lX:()=>l,xI:()=>i});var a=n(77101),r=n(37428);let s="settings",i=e=>a.sb[e]||e,o=()=>{let e=(0,r.wc)();return t=>t===a.v8.FIDDLEHEAD&&e[r.Wj]?e[r.Wj]:t===a.v8.CUTTLEFISH&&e[r.in]?e[r.in]:a.sb[t]||t};function l(e,t){var n;return(null==(n=e.server)?void 0:n.type)==="remote"&&t(e.server)}},88185:(e,t,n)=>{n.d(t,{K8:()=>b,$F:()=>y,Dx:()=>C,Y5:()=>w,hW:()=>_,Ox:()=>S,c7:()=>A,kV:()=>x});var a=n(98518),r=n(77186),s=n(1761),i=n(27062),o=n(77101),l=n(62942),c=n(7620),d=n(45270),u=n(62370),m=n(43172),f=n(75006);let p=f.z.object({field:f.z.enum(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:f.z.string()}),h=f.z.object({uuid:f.z.string(),name:f.z.string(),oneLiner:f.z.string(),description:f.z.string(),iconUrl:f.z.string().optional(),toolNames:f.z.array(f.z.string()),promptNames:f.z.array(f.z.string()),license:f.z.string().optional(),version:f.z.string().optional(),author:f.z.object({name:f.z.string().optional(),url:f.z.string().optional()}).optional(),documentation:f.z.string().optional(),support:f.z.string().optional(),privacyPolicy:f.z.string().optional(),requiredFields:f.z.array(p).optional()});h.and(f.z.object({type:f.z.enum(["firstParty"]),syncSourceType:f.z.enum([o.v8.GDRIVE,o.v8.GMAIL,o.v8.GCAL,o.v8.SLACK])}));let g=h.and(f.z.object({type:f.z.enum(["remote"]),isAuthless:f.z.boolean()}).and(f.z.union([f.z.object({url:f.z.string(),urlRegex:f.z.undefined()}),f.z.object({url:f.z.undefined(),urlRegex:f.z.string()})])));h.and(f.z.object({type:f.z.enum(["local"]),manifest:m.PX,onDiskPath:f.z.string().optional(),downloadCount:f.z.number().optional(),lifetimeDownloadCount:f.z.number().optional(),isBlocklisted:f.z.boolean().optional(),isInternal:f.z.boolean().optional()}));let v=f.z.array(g),x=e=>{let{isOpen:t,selectedServerId:n}=e,r=(0,c.useRef)(!1),{track:s}=(0,a.st)();(0,c.useEffect)(()=>{t&&(!r.current||n)&&(r.current=!0,s({event_key:"claudeai.mcp.directory.page_view",directory_server_id:n}))},[t,n,s])},b=e=>{let{openModal:t}=e,n=(0,l.useSearchParams)(),a=n.get("directory-open"),r=n.get("directory-uuid");(0,c.useEffect)(()=>{if(a){try{let e=new URL(window.location.href);e.searchParams.delete("directory-open"),e.searchParams.delete("directory-uuid"),window.history.replaceState(null,"",e.pathname+e.search+e.hash)}catch(e){window.history.replaceState(null,"",window.location.pathname+window.location.hash)}t(null!=r?r:void 0)}},[a,r,t])},y=e=>{let{modalIsOpen:t,directoryUuid:n}=e,a=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e;try{e=new URL(window.location.href)}catch(e){return}t?(a.current||(a.current=window.location.pathname),window.history.replaceState(null,"","/directory".concat(n?"/".concat(n):"")+e.search+e.hash)):!t&&a.current&&(window.history.replaceState(null,"",a.current+e.search+e.hash),a.current=null)},[t,n])},j=[{uuid:"8c1b41b4-c060-4704-8c17-95c39fa3511c",name:"Gmail",type:"firstParty",syncSourceType:o.v8.GMAIL,oneLiner:"Draft replies, summarize threads, & search your inbox",description:"Connect Gmail to Claude to quickly find important emails and understand long conversations. Claude can search through your messages, read entire email threads to give you context, and help you stay on top of your inbox. Perfect for finding that message you remember sending, catching up on email chains you missed, or preparing for meetings.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/11088742-using-the-gmail-and-google-calendar-integrations",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"},{uuid:"da761fc3-2821-443c-9734-0b53599fda39",name:"Google Calendar",type:"firstParty",syncSourceType:o.v8.GCAL,oneLiner:"Understand your schedule and optimize your time",description:"Connect Google Calendar to Claude so it can see your schedule, find specific events, and help you prepare for meetings. Claude can search your calendar for events, check your availability, and find free time slots for scheduling. Useful for understanding what’s coming up, preparing for meetings by seeing attendee lists and details, or coordinating schedules when planning new events.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/11088742-using-the-gmail-and-google-calendar-integrations",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"},{uuid:"37fb5d42-ef62-45d4-a12e-66551527a003",name:"Google Drive",type:"firstParty",syncSourceType:o.v8.GDRIVE,oneLiner:"Find and analyze files instantly",description:"Connect Google Drive to Claude so it can search through your documents, read file contents, and help you work with your files. Claude can find specific documents even when you don’t remember the exact name, read and analyze the content of your docs, and convert files to different formats. Useful for finding old project notes, analyzing document content, or pulling information from files scattered across your Drive.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/10166901-using-the-google-drive-integration",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"}],w=()=>{let e=(0,u.Uz)();return{getCorrespondingInstalledServer:t=>{let{url:n,urlRegex:a}=t;if(n)return e.find(e=>e.url===n)||null;if(a){let t=new RegExp(a);return e.find(e=>t.test(e.url||""))||null}return null}}},C=e=>({getCorrespondingDirectoryServer:(0,c.useCallback)(t=>{let{url:n}=t;return n&&e.find(e=>{if("remote"===e.type){if(e.url)return e.url===n;else if(e.urlRegex)return new RegExp(e.urlRegex).test(n)}return!1})||null},[e])}),A=()=>{let e=(0,i.T9)("mcp_directory_servers","servers",[],v);return{status:"success",servers:[...(e=>{var t,n,a;let r=new Set;return(null==(t=e[o.v8.GMAIL])?void 0:t.available)||r.add(o.v8.GMAIL),(null==(n=e[o.v8.GCAL])?void 0:n.available)||r.add(o.v8.GCAL),(null==(a=e[o.v8.GDRIVE])?void 0:a.available)||r.add(o.v8.GDRIVE),j.filter(e=>!r.has(e.syncSourceType))})((0,d.Ou)()),...e].sort((e,t)=>e.name.localeCompare(t.name)),refetch:()=>{}}},_=()=>{let{servers:e}=A(),{getCorrespondingDirectoryServer:t}=C(e.filter(e=>"remote"===e.type));return{isRemoteServerInDirectory:e=>{let{url:n}=e;return!!t({url:n})}}},S=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,s.YL)(),n=(0,r.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/dxt/extensions"),{headers:{"x-dxt-registry-version":"2"}});return"success"!==n.status?{status:n.status,servers:[],refetch:()=>{n.refetch()}}:{status:n.status,refetch:()=>{n.refetch()},servers:n.data.entries.filter(t=>e||!0!==t.is_blocklisted).map(e=>{var t,n;let a=e.manifest;return{type:"local",uuid:e.id,name:a.display_name||a.name,oneLiner:a.description,description:a.long_description||a.description,iconUrl:e.icon_url||"",toolNames:(null==(t=a.tools)?void 0:t.map(e=>e.name))||[],promptNames:(null==(n=a.prompts)?void 0:n.map(e=>e.name))||[],license:a.license,version:a.version,author:{name:a.author.name,url:a.author.url},documentation:a.documentation,support:a.support,manifest:a,downloadCount:e.download_count,lifetimeDownloadCount:e.lifetime_download_count,isBlocklisted:e.is_blocklisted,isInternal:e.is_internal}}).sort((e,t)=>{var n,a;let r=null!=(n=e.lifetimeDownloadCount)?n:-1;return(null!=(a=t.lifetimeDownloadCount)?a:-1)-r})}}},90510:(e,t,n)=>{n.d(t,{J:()=>i});var a=n(32987),r=n(7620);function s(e){return function(t){for(var n=arguments.length,s=Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];let o=t.map(e=>e.replace(/\n/g,"").trim()),l=r.forwardRef((t,n)=>{let{className:i,...l}=t,c=s.map(e=>"function"==typeof e?e(t):e),d=Object.fromEntries(Object.entries(l).filter(e=>{let[t]=e;return!t.startsWith("$")}));return r.createElement(e,{...d,ref:n,className:(0,a.A)(o,c,"string"==typeof i?i:"")})});return l.displayName="string"==typeof e?e:e.displayName,l}}function i(e){return s(e)}i.a=s("a"),i.aside=s("aside"),i.button=s("button"),i.main=s("main"),i.div=s("div"),i.form=s("form"),i.nav=s("nav"),i.fieldset=s("fieldset"),i.header=s("header"),i.h1=s("h1"),i.h2=s("h2"),i.h3=s("h3"),i.h4=s("h4"),i.h5=s("h5"),i.th=s("th"),i.td=s("td"),i.input=s("input"),i.label=s("label"),i.p=s("p"),i.section=s("section"),i.span=s("span"),i.li=s("li"),i.table=s("table"),i.thead=s("thead"),i.tbody=s("tbody"),i.tr=s("tr")},91926:(e,t,n)=>{n.d(t,{f:()=>i});var a=n(54568),r=n(52198),s=n(32987);let i=(0,n(7620).forwardRef)((e,t)=>{let{checkState:n,onClick:i,label:o,...l}=e,c="partial"===n?r.Hs:r.Jl;return(0,a.jsxs)("div",{className:"p-2 -m-2 flex items-center",onClick:e=>{e.stopPropagation(),i({didCheck:"unchecked"===n})},children:[(0,a.jsx)("button",{ref:t,className:(0,s.A)("rounded p-[0.5px] border-0.5 flex items-center justify-center transition","unchecked"!==n?"bg-accent-secondary-000 border-accent-secondary-200 shadow-sm":"border-border-200 hover:bg-bg-000 hover:shadow-sm"),...l,children:(0,a.jsx)(c,{className:(0,s.A)("text-always-white transition",{invisible:"unchecked"===n}),size:16})}),o&&(0,a.jsx)("span",{className:"ml-2 cursor-pointer",children:o})]})});i.displayName="PartialCheckbox"},91961:(e,t,n)=>{n.d(t,{Fr:()=>r,K7:()=>m,Nj:()=>f,cX:()=>i,fJ:()=>u,lh:()=>p,uF:()=>c,vm:()=>o});var a=n(7620);function r(){return window.innerWidth<640}let s=/(macintosh|macintel|macppc|mac68k|macos)/i;function i(){let e=window.navigator.userAgent.toLowerCase();return s.test(e)}function o(){return(0,a.useMemo)(()=>/(macintosh|macintel|macppc|mac68k|macos)/i.test(window.navigator.userAgent),[])}let l=/(win32|win64|windows|wince)/i;function c(){let e=window.navigator.userAgent.toLowerCase();return l.test(e)}let d=/(iphone|ipad|ipod|android|mobile|webos)/i;function u(){let e=window.navigator.userAgent.toLowerCase();return d.test(e)}function m(e){(0,a.useEffect)(()=>{let t=document.title;return e&&(document.title="".concat(e," - Claude")),()=>{document.title=t}},[e])}let f=e=>{try{return new URL(e).hostname.split(".").slice(-2).join(".")}catch(e){return}},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=[16,32,48,64,96,128].find(e=>e>=2*t)||128,a=f(e);if(a)return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=").concat(n)}},97949:(e,t,n)=>{n.d(t,{tn:()=>j,nB:()=>h,rW:()=>g,Cq:()=>v,JR:()=>y,b4:()=>x,yL:()=>b});var a=n(77186),r=n(1761),s=n(71473),i=n(77101),o=n(90119),l=n(87606),c=n(62942),d=n(7620),u=n(18900),m=n(91768),f=n(40459);let p="github_success",h=function(){var e;let{callerIdentifier:t,toggleGithubModalOpen:n,fetchImmediately:i=!1,pathname:l,queryString:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:f}=(0,r.YL)(),h=null==f?void 0:f.uuid,g=v(),[x,b]=(0,d.useState)(i),y=(e=>{let{shouldFetch:t=!1}=e,{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid,o=v();return(0,a.Sk)("/api/organizations/".concat(i,"/sync/github/auth"),{queryKey:[s.Hv,{orgUUID:i}],enabled:!!(t&&n&&o)})})({shouldFetch:x}),j=(0,d.useCallback)(async()=>{var e,t;return x?null==(t=y.data)?void 0:t.is_authenticated:(b(!0),null==(e=(await y.refetch()).data)?void 0:e.is_authenticated)},[y,x]),{mutate:w}=(0,a.L2)("/api/organizations/".concat(h,"/sync/github/auth/start"),"POST",{enabled:!!(f&&g),onSuccess:e=>{if(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return!1;try{if(!e.startsWith("http://")&&!e.startsWith("https://"))return!1;let n=new URL(e);return"https:"===n.protocol&&t.some(e=>n.hostname===e||n.hostname.endsWith(".".concat(e)))}catch(e){return!1}}(e.redirect_url,["github.com"]))window.location.href=e.redirect_url;else throw Error("Invalid redirect URL received from auth endpoint")}}),C="".concat(p,"=").concat(t).concat(u?"&".concat(u):"");(0,m.FZ)({callerIdentifier:t,successParam:p,handleOpen:()=>{null==n||n(!0)}});let A=(0,c.useSearchParams)(),_=(0,o.V)(),S=(0,d.useRef)(!1),N=(0,c.usePathname)(),z=(0,m.dH)({pathname:l||N,searchParams:A,queryString:C,isClaudeApp:_});return{checkIsGithubAuthenticated:j,initGithubAuth:()=>{if(g){if(_)return void window.open("/settings/connectors?open_in_browser=1&auth_start=github&origin=".concat(z));S.current||(S.current=!0,w({pre_auth_state:{origin:z}}))}},isGithubAuthenticated:null==(e=y.data)?void 0:e.is_authenticated,isLoading:y.isLoading}},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,i=v(),o=(0,l.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/sync/github/auth"),"DELETE",{enabled:!!(t&&i),...e,onSuccess:function(){for(var t,a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];o.invalidateQueries({queryKey:[s.Hv,{orgUUID:n}]}),null==(t=e.onSuccess)||t.call(e,...r)}})},v=()=>{let{data:e}=(0,m.LN)(),t=(0,r.mV)(),n=!!(Array.isArray(e)&&e.find(e=>e.type===i.v8.GITHUB&&e.enabled));return!!(!f.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!t||n))},x=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=v();return(0,a.Sk)("/api/organizations/".concat(t,"/sync/github/repos"),{queryKey:[s.jL,{orgUUID:t}],enabled:!!(e&&n),meta:{noToast:!0}})},b=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=v();return(0,a.Sk)("/api/organizations/".concat(t,"/code/repos"),{queryKey:["SYNC_GH_REPOS_WITH_STATUS_QUERY_KEY",{orgUUID:t}],enabled:!!(e&&t&&n),meta:{noToast:!0}})};function y(){let e=(0,u.iB)();return(0,d.useCallback)(t=>{var n,a,r;return e?null==(n=t.status)?void 0:n.app_installed:(null==(a=t.status)?void 0:a.workflow_enabled)===!0&&(null==(r=t.status)?void 0:r.app_installed)===!0},[e])}let j=e=>{var t;let{owner:n,repo:i,branch:o}=e,l=(e=>{let{owner:t,repo:n,branch:i}=e,{activeOrganization:o}=(0,r.YL)(),l=null==o?void 0:o.uuid,c=v(),d=new URLSearchParams({owner:null!=t?t:"",repo:null!=n?n:""}).toString();return(0,a.Sk)("/api/organizations/".concat(l,"/sync/github/repo?").concat(d),{queryKey:[s.yB,{orgUUID:l,owner:t,repo:n}],enabled:!!(t&&n&&!i&&o&&c),meta:{noToast:!0}})})({owner:n,repo:i,branch:o}),c=(e=>{let{owner:t,repo:n,branch:i}=e,{activeOrganization:o}=(0,r.YL)(),l=null==o?void 0:o.uuid,c=v();return(0,a.Sk)("/api/organizations/".concat(l,"/sync/github/repo/").concat(t,"/").concat(n,"/tree/").concat(i),{queryKey:[s.o6,{orgUUID:l,owner:t,repo:n,branch:i}],staleTime:3e5,enabled:!!(t&&n&&i&&o&&c),meta:{noToast:!0}})})({owner:n,repo:i,branch:o||(null==(t=l.data)?void 0:t.default_branch)});return{data:{repo:l.data,tree:c.data},isFetching:l.isFetching||c.isFetching,error:l.error||c.error}}}}]);